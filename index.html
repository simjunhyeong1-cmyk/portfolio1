<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> SonHeungMin Site </title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&display=swap" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="./imgs/favicon_io/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./imgs/favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./imgs/favicon_io/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
</head>
<body>
    <header>
        <nav class="menu">
            <a href="#" title="메뉴보기" class="logo">메뉴</a>
            <div class="sub">
                <ul>
                    <li><a href="#match">경기일정</a></li>
                    <li><a href="#news">뉴스</a></li>
                    <li><a href="#stat">역대 팀 기록</a></li>
                    <li><a href="#highlight">하이라이트</a></li>
                    <li><a href="#sponser">스폰서</a></li>
                </ul>
                <button type="close" class="close"><img src="./imgs/close.png" alt=""></button>
            </div>
        </nav>
        
        <nav class="language">
            <ul>
            <li><img src="./imgs/language.png" alt=""><a href="#">한국어</a></li>
            </ul>
        </nav>        
    </header>

<section id="main">
    <div class="main_visual">
        <div class="mainimg"><img src="./imgs/main.jpg" alt=""></div>
        <div class="mobilimg"><img src="./imgs/mobilemain.jpg" alt=""></div>
        <div class="sign"><img src="./imgs/sign.png" alt=""></div>
        
    </div>
    <div class="timer">
        <h2>다음 경기 남은 시간</h2>
        <div class="countdown">
            01일 01시 01분 01초
        </div>
    </div>
</section>


<section id="match">
    <div class="img">
        <img src="./imgs/match.png">
        <div class="info">
            <p>손흥민 다음 경기 일정</p>
        </div>
    </div>
    <div class="nextmatch1">
        <p class="day1">11월 14일<br>금요일</p>
            <div class="match1">
            <p class="content">A매치 친선경기 평가전<br>대전 월드컵 경기장</br></p>
            <a href="#"><img src="./imgs/korea.png" alt="korea">대한민국</a>
            <p><strong>VS</strong></p>
            <a href="#"><img src="./imgs/bolivia.png" alt="bolivia">볼리비아</a>
            <br>
            
            <a href="https://www.kfa.or.kr/"><img src="./imgs/ticketlogo.jpg" alt="티켓구매사이트"> 티켓예매링크</a>
            </div>
    </div>
    <div class="nextmatch2">
        <p class="day2">11월 18일<br>화요일</br></p>
        <div class="match2">
        <p class="content">A매치 친선경기 평가전<br>서울 월드컵 경기장</br></p>
        <a href="#"><img src="./imgs/korea.png" alt="대한민국">대한민국</a>
        <p><strong>VS</strong></p>
        <a href="#"><img src="./imgs/gana.png" alt="가나">가나</a>
        <br>
        
        <a href="https://www.kfa.or.kr/"><img src="./imgs/ticketlogo.jpg" alt="티켓구매사이트"> 티켓예매링크</a>
        </div>
    </div>
</section>

<section id="news">
    <div class="head">
        <h2>뉴스</h2>
        <a href="#" class="all">뉴스 전체보기</a>
    </div>
    <div class="content">
        <div class="mainnews">
            
            <a href="#">
                <span><img src="./imgs/news1.jpg" alt=""></span>
                <strong>신인상 놓쳤지만…MLS서 석 달 뛴<br> 손흥민의 놀라운 근황</strong></a>
                <br>
                <br>
                <p>손흥민의 미국프로축구 메이저리그사커(MLS) '올해의 신인상'<br> 수상은 불발됐지만, 고작 석 달을 뛰고도 신인상 투표 2위에 올랐다.</p>
                <br>
                
                <p>MLS 사무국은 5일(한국시간) "샌디에이고FC의 미드필더 <br>안데르스 드레이어(27·덴마크)가 2025 MLS 올해의 신인선수로 선정됐다"고 발표했다</p>
        </div>
        <div class="subnews">
            <div>
                <a href="#">
                    <figure>
                        <span><img src="./imgs/news2.jpg" alt=""></span>
                        <figcaption>
                            <p class="title"><strong>손흥민 대표팀 오늘 입소</strong></p>
                            <p>대한민국 축구 국가대표팀 주장 손흥민이 10일 오후 충남 천안시 대한민국축구종합센터에 입소하고 있다. = 황준선 기자</p>
                        </figcaption>
                    </figure>
                </a>
                <a href="#">
                    <figure>
                        <span><img src="./imgs/news3.jpg" alt=""></span>
                        <figcaption>
                            <p class="title"><strong>대표팀 입소 후 훈련 진행</strong></p>
                            <p>대한민국 축구 국가대표팀 주장 손흥민과 선수들이 10일 오후 충남 천안시 대한민국축구종합센터에서 훈련을 하고 있다. = 황준선 기자</p>
                        </figcaption>
                    </figure>
                </a>
                <a href="#">
                    <figure>
                        <span><img src="./imgs/news4.jpg" alt=""></span>
                        <figcaption>
                            <p class="title"><strong>반 더 벤, 골넣고 손흥민에게 연락</strong></p>
                            <p>"SON 골이랑 내 골, 뭐가 더 낫냐고?" '67.7m 질주' 반 더 벤, 입 열었다..."솔직히 정말 비슷해! 손흥민에게 문자 받았다" = 고성환 기자</p>
                        </figcaption>
                    </figure>
                </a>
                <a href="#">
                    <figure>
                        <span><img src="./imgs/news5.jpg" alt=""></span>
                        <figcaption>
                            <p class="title"><strong>토트넘 손흥민 이적 후 매출 급격히 감소</strong></p>
                            <p>“그러게 있을 때 잘하지”…‘손흥민’ 떠나니 토트넘 티켓 값 뚝, 관중석 텅텅 =최기성기자</p>
                        </figcaption>
                    </figure>
                </a>
            </div>
        </div>
        <div class="banner">
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="./imgs/model1.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="./imgs/model2.jpg" alt=""></div>
                    <div class="swiper-slide"><img src="./imgs/model3.jpg" alt=""></div>
                </div>              
                <div class="swiper-pagination"></div>
            </div>
            <a href="https://www.adidas.com/"><img src="./imgs/adidaslogowhite.png" alt=""><strong>사이트 바로가기</strong></a>
        </div>
    </div>
</section>

<section id="stat">
    
    <div class="head">
    <h2>손흥민 기록</h2>
    <div class="btn-group">
        <button class="btn1 active" data-index="1">토트넘</button>
        <button class="btn2" data-index="2">LAFC</button>
        <button class="btn3" data-index="3">함부르크</button>
        <button class="btn4" data-index="4">레버쿠젠</button>
        <button class="btn5" data-index="5">대한민국</button>
        <button class="btn6" data-index="6">전체기록</button>
    </div>
    </div>
    <div class="canvas">
        <canvas id="status"></canvas>
    </div>
</section>

<section id="ppl">
    <div class="hanabank">
        <video src="./imgs/ppl1.mp4"></video>
        <p>
        <img src="./imgs/hanabank.png" alt="">
        <a href="https://www.kebhana.com/">사이트 바로가기</a>
        </p>
    </div>
    <div class="NOS7">
        <div class="store">
                <div class="text">
                <p>Nothing,<br>Ordinary<br>Sunday<br><br>아무것도 없는 평범한 일요일</p>
                <br>
                <p><strong>손흥민 공식 의류 브랜드</strong></p>        
            </div>
            <img src="./imgs/logoblack.png" alt="">
            <a href="https://www.nos7.com/?NaPm=ct%3Dmi8mbbe8%7Cci%3Dcheckout%7Ctr%3Dds%7Ctrx%3Dnull%7Chk%3D61886339d1d50e63fe815a7b679bf557b58065c9">사이트 바로가기</a>
    </div>
</section>

<section id="highlight">
    <div class="head">
        <h2>손흥민 하이라이트</h2>
        <a href="#" class="all">하이라이트 전체보기</a>
    </div>
    
    <div class="main">
    <div class="mainhighlight1 mainhighlight">
        <video src="./imgs/video1.mp4"></video>
        <div class="puskas">
        <p class="title"><strong>손흥민 푸스카스 골</strong></p>
        <p class="content">손흥민 번리전 70m 질주 골로 한국인 최초로 FIFA 푸스카스상 수상</p>
        </div>
    </div>
    <div class="mainhighlight2 mainhighlight">
        <video src="./imgs/video2.mp4"></video>
        <div class="korea">
        <p class="title"><strong>손흥민 프리킥 골</strong></p>  
        <p class="content">손흥민 볼리비아전 환상적인 프리킥골</p>  
        </div>
    </div>
</div>


    
    <div class="subhighlight">
        <div><img src="./imgs/hightlight2.png" alt="토트넘"><a href="#">토트넘 하이라이트</a></div>
        <div><img src="./imgs/hightlight3.jpg" alt="LAFC"><a href="#">LAFC 하이라이트</a></div>
        <div><img src="./imgs/hightlight4.jpg" alt="대한민국"><a href="#">대한민국 하이라이트</a></div>
        <div><img src="./imgs/hightlight5.jpg" alt="함부르크"><a href="#">함부르크 하이라이트</a></div>
        <div><img src="./imgs/hightlight6.jpg" alt="레버쿠젠"><a href="#">레버쿠젠 하이라이트</a></div>
        <div><img src="./imgs/totson1 1.jpg" alt="스페셜"><a href="#">손흥민 스페셜 영상</a></div>
    </div>
</section>

<section id="sponser">
    <div class="logo">
        <ul>
            <li><a href="https://www.nos7.com/?NaPm=ct%3Dmi8mbbe8%7Cci%3Dcheckout%7Ctr%3Dds%7Ctrx%3Dnull%7Chk%3D61886339d1d50e63fe815a7b679bf557b58065c9"><img src="./imgs/logo1.png" alt="nos7"></a></li>
            <li><a href="https://www.adidas.com/"><img src="./imgs/logo2.png" alt="아디다스"></a></li>
            <li><a href="https://www.kebhana.com/"><img src="./imgs/logo3.png" alt="하나은행"></a></li>
            <li><a href="#"><img src="./imgs/logo4.png" alt="메가커피"></a></li>
            <li><a href="#"><img src="./imgs/logo5.png" alt="한국축구협회"></a></li>
            <li><a href="#"><img src="./imgs/logo6.png" alt="질레트"></a></li>
            <li><a href="#"><img src="./imgs/logo7.png" alt="삼성"></a></li>
        </ul>
    </div>
    <div class="sns">
        <div><a href="#"><img src="./imgs/twiter.png" alt="트위터"></a></div>
        <div><a href="#"><img src="./imgs/facebook.png" alt="페이스북"></a></div>
        <div><a href="#"><img src="./imgs/insta.png" alt="인스타"></a></div>
        <div><a href="#"><img src="./imgs/youtube.png" alt="유튜브"></a></div>
    </div>
</section>

<footer>
    <ul class="footer_menu">
        <li><a href="#">공지사항</a></li>
        <li><a href="#">고객센터</a></li>
        <li><a href="#">개인정보처리방침</a></li>
        <li><a href="#">이용약관</a></li>
        <li><a href="#">제작자:심준형</a></li>
    </ul>
</footer>

<script>
    const countdown = document.querySelector('.countdown');
    let interval;
    //console.log( new Date().getTime() );
    calculateDday=(targetDate)=>{
    const now = new Date().getTime();
    targetDate = new Date(targetDate).getTime();
    const timeDifference = targetDate - now;
    const days = Math.floor( timeDifference/(1000*60*60*24) );
    const hours = Math.floor( ( timeDifference % (1000*60*60*24))/(1000*60*60) );
    const minutes = Math.floor( ( timeDifference % (1000*60*60))/(1000*60) );
    const seconds = Math.floor( ( timeDifference % (1000*60))/1000 );
    countdown.innerHTML=`${days}일 ${hours}시간 ${minutes}분 ${seconds}초 `;
}
interval = setInterval(()=>{ calculateDday('2025-11-20T16:00:00') }, 1000);
/* datePicker.addEventListener('change', ()=>{
    const selectedDate = new Date( datePicker.value ).getTime();
    console.log( datePicker.value);
    if( isNaN(selectedDate) ){
    return;
    }
    clearInterval(interval);
    calculateDday(selectedDate);
    interval = setInterval(()=>{ calculateDday(selectedDate) }, 1000);
}) */


document.addEventListener("DOMContentLoaded", () => {
      const ctx = document.getElementById('status').getContext('2d');

      // 데이터셋 1: 토트넘
      const originalLabels1 = ['15~16시즌','16~17시즌','17~18시즌','18~19시즌','19~20시즌','20~21시즌','21~22시즌','22~23시즌','23~24시즌','24~25시즌'];
      const originalData1 = [[40,8,6],[47,21,7],[53,18,11],[48,20,9],[41,18,12],[51,22,17],[45,24,8],[47,14,6],[36,17,10],[46,11,12]];
      const chartTitle1 = '토트넘 경기 기록';
      const bgImage1 = 'url("./imgs/stat1.jpg")';

      // 데이터셋 2: LAFC
      const originalLabels2 = ['25~26시즌'];
      const originalData2 = [[13,12,4]];
      const chartTitle2 = 'LAFC 경기 기록';
      const bgImage2 = 'url("./imgs/stat2.jpg")';

      // 데이터셋 3: 함부르크
      const originalLabels3 = ['10~11시즌','11~12시즌','12~13시즌'];
      const originalData3 = [[14,3,0],[30,5,1],[34,12,2]];
      const chartTitle3 = '함부르크 경기 기록';
      const bgImage3 = 'url("./imgs/stat3.jpg")';


      // 데이터셋 4: 레버쿠젠
      const originalLabels4 = ['13~14시즌','14~15시즌','15~16시즌'];
      const originalData4 = [[43,12,7],[42,17,3],[2,0,0]];
      const chartTitle4 = '레버쿠젠 경기 기록';
      const bgImage4 = 'url("./imgs/stat4.jpg")';

      // 데이터셋 5: 대한민국
      const originalLabels5 = ['2010~2014년','2015~2020년','2021~2025년'];
      const originalData5 = [[34,7,0],[55,19,0],[50,28,0]];
      const chartTitle5 = '대한민국 경기 기록';
      const bgImage5 = 'url("./imgs/stat5.jpg")';

      // 데이터셋 5: 손흥민 통산
      const originalLabels6 = ['클럽통산기록','국가대표통산기록','전체통산기록'];
      const originalData6 = [[632,234,115],[140,54,0],[772,288,115]];
      const chartTitle6 = '손흥민 전체 기록';
      const bgImage6 = 'url("./imgs/stat6.jpg")';

      const dataConfig = [
        { labels: originalLabels1, data: originalData1, title: chartTitle1, bgImage: bgImage1 },
        { labels: originalLabels2, data: originalData2, title: chartTitle2, bgImage: bgImage2 },
        { labels: originalLabels3, data: originalData3, title: chartTitle3, bgImage: bgImage3 },
        { labels: originalLabels4, data: originalData4, title: chartTitle4, bgImage: bgImage4 },
        { labels: originalLabels5, data: originalData5, title: chartTitle5, bgImage: bgImage5 },
        { labels: originalLabels6, data: originalData6, title: chartTitle6, bgImage: bgImage6 }
      ];

      function splitData2D(data2D) {
        const d1 = [], d2 = [], d3 = [];
        data2D.forEach(item => {
          d1.push(item[0]);
          d2.push(item[1]);
          d3.push(item[2]);
        });
        return [d1, d2, d3];
      }

      const splitDatasets = dataConfig.map(config => splitData2D(config.data));
      let [dataset1_values, dataset2_values, dataset3_values] = splitDatasets[0];

      const colors = [
          'rgba(0, 2, 124, 0.8)', // 투표수1 
          'rgba(153, 0, 0, 0.8)', // 투표수2 
          'rgba(40, 104, 38, 0.8)'  // 투표수3 
      ];
      const borderColors = [
          'rgba(0, 2, 124, 1)',
          'rgba(153, 0, 0, 1)',
          'rgba(40, 104, 38, 0.8)'
      ];

      let isMobile = window.matchMedia("(max-width: 768px)").matches;
      let axisType = isMobile ? 'y' : 'x';

      function createChart(indexAxis) {
        return new Chart(ctx, {
          type:'bar', 
          data:{
            labels: dataConfig[0].labels,
            datasets:[
              {
                label:'출전경기', 
                data: dataset1_values,
                backgroundColor: colors[0],
                borderColor: borderColors[0],
                borderWidth:1
              },
              {
                label:'골', 
                data: dataset2_values,
                backgroundColor: colors[1],
                borderColor: borderColors[1],
                borderWidth:1
              },
              {
                label:'어시스트', 
                data: dataset3_values,
                backgroundColor: colors[2],
                borderColor: borderColors[2],
                borderWidth:1
              }
            ]
          },
          options:{
            indexAxis: indexAxis,
            scales:{
              x:{ beginAtZero:true },
              y:{ beginAtZero:true }
            },
            plugins: {
              title: {
                display: true,
                text: dataConfig[0].title
              }
            },
            responsive: true,
            maintainAspectRatio: false
          }
        });
      }

      let myChart = createChart(axisType);

      function setChartDataByIndex(index) {
        const dataIndex = index-1;
        const config = dataConfig[dataIndex];
        const [d1, d2, d3] = splitDatasets[dataIndex];

        document.querySelectorAll('.btn-group button').forEach((btn) => {
          btn.classList.remove('active');
        });
        document.querySelector(`.btn${index}`).classList.add('active');

        myChart.data.labels = config.labels;
        myChart.data.datasets[0].data = d1.slice();
        myChart.data.datasets[1].data = d2.slice();
        myChart.data.datasets[2].data = d3.slice();
        myChart.options.plugins.title.text = config.title;

        document.querySelector('#stat').style.backgroundImage = config.bgImage;

        myChart.update();
      }
      
      document.querySelectorAll('.btn-group button').forEach(button => {
        button.addEventListener('click', () => {
          const index = parseInt(button.getAttribute('data-index'));
          setChartDataByIndex(index);
        });
      });

      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
          const newIsMobile = window.matchMedia("(max-width: 768px)").matches;
          const newAxisType = newIsMobile ? 'y' : 'x';

          if (axisType !== newAxisType) {
            isMobile = newIsMobile;
            axisType = newAxisType;

            const currentData0 = myChart.data.datasets[0].data.slice();
            const currentData1 = myChart.data.datasets[1].data.slice();
            const currentData2 = myChart.data.datasets[2].data.slice();

            myChart.destroy();

            dataset1_values = currentData0.slice();
            dataset2_values = currentData1.slice();
            dataset3_values = currentData2.slice();

            myChart = createChart(axisType);
          }
        }, 50);
      });

    });





    (function () {
      'use strict';
      const ICON_SHOW_MS = 700;
      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          const wrap = entry.target;
          const video = wrap.querySelector('video');
          if (!video) return;
          if (!entry.isIntersecting) {
            if (!video.paused) {
              video.pause();
              wrap.classList.remove('is-playing');
            }
          }
        });
      }, {
        root: null,
        threshold: 0.25
      });
      const wrappers = document.querySelectorAll('.mainhighlight');
      wrappers.forEach((wrap) => {
        const video = wrap.querySelector('video');
        if (!video) return;
        try {
          video.setAttribute('playsinline', '');
          video.setAttribute('webkit-playsinline', '');
        } catch (e) {
          // 무시
        }
        if (!wrap.hasAttribute('tabindex')) {
          wrap.setAttribute('tabindex', '0');
        }
        if (!video.getAttribute('aria-label')) {
          video.setAttribute('aria-label', '재생 가능한 비디오');
        }
        let lastPointerTime = 0;
        const POINTER_IGNORE_MS = 120;
        wrap.addEventListener('pointerdown', () => {
          const now = Date.now();
          if (now - lastPointerTime < POINTER_IGNORE_MS) {
            lastPointerTime = now;
          } else {
            lastPointerTime = now;
          }
        });
        function togglePlay() {
          if (video.paused) {
            video.play().catch((err) => {
              console.warn('video play failed:', err);
            });
            wrap.classList.add('is-playing');
          } else {
            video.pause();
            wrap.classList.remove('is-playing');
          }
        }
        function flashIcon() {
          wrap.classList.add('flash');
          clearTimeout(wrap._flashTimer);
          wrap._flashTimer = setTimeout(() => {
            wrap.classList.remove('flash');
          }, ICON_SHOW_MS);
        }
        wrap.addEventListener('click', (e) => {
          e.preventDefault();
          togglePlay();
          flashIcon();
        });
        wrap.addEventListener('keydown', (e) => {
          const key = e.key || e.code;
          if (key === ' ' || key === 'Space' || key === 'Spacebar' || key === 'Enter' || key === 'NumpadEnter') {
            e.preventDefault();
            togglePlay();
            flashIcon();
          }
        });
        video.addEventListener('play', () => wrap.classList.add('is-playing'));
        video.addEventListener('pause', () => wrap.classList.remove('is-playing'));
        video.addEventListener('ended', () => wrap.classList.remove('is-playing'));
        io.observe(wrap);
        document.addEventListener('visibilitychange', () => {
          if (document.hidden && !video.paused) {
            video.pause();
            wrap.classList.remove('is-playing');
          }
        }, false);
      });
    })();
    


    var swiper = new Swiper(".mySwiper", {
      pagination: {
        el: ".swiper-pagination",
      },
      autoplay: {
        delay: 2500,
        disableOnInteraction: false,
      },
    });

</script>


<script src="./js/script.js"></script>
</body>
</html>